{"ast":null,"code":"import React,{useEffect,useCallback,useState}from\"react\";import{useNavigate,useParams}from'react-router-dom';import ReactPlayer from\"react-player\";import peer from\"../service/peer\";import{useSocket}from\"../context/SocketProvider\";import'../Room.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoomPage=()=>{const{roomId}=useParams();const socket=useSocket();const[remoteSocketId,setRemoteSocketId]=useState(null);const[myStream,setMyStream]=useState();const[remoteStream,setRemoteStream]=useState();const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState(\"\");const[isCalling,setIsCalling]=useState(false);// State to track if the call is ongoing\nconst navigate=useNavigate();useEffect(()=>{const storedUser=localStorage.getItem('user');const storeToken=localStorage.getItem('token');if(!storeToken&&!storedUser){navigate('/login');}},[]);const handleUserJoined=useCallback(_ref=>{let{email,id}=_ref;console.log(`Email ${email} joined room`);setRemoteSocketId(id);},[]);const handleCallUser=useCallback(async()=>{const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});const offer=await peer.getOffer();socket.emit(\"user:call\",{to:remoteSocketId,offer});setMyStream(stream);setIsCalling(true);// Set the call as ongoing\n},[remoteSocketId,socket]);// const handleEndCall = useCallback(() => {\n//   socket.emit(\"call:end\", { to: remoteSocketId });\n//   setIsCalling(false); // Set the call as ended\n//   setMyStream(null); // Stop the stream\n//   setRemoteStream(null); // Stop the remote stream\n//   // Disconnect socket after the call ends\n//   socket.disconnect();\n//   console.log(\"Socket disconnected\");\n// }, [remoteSocketId, socket]);\nconst handleEndCall=useCallback(()=>{// Stop all tracks of the local stream\nif(myStream){myStream.getTracks().forEach(track=>track.stop());}// Reset streams and call state\nsetMyStream(null);setRemoteStream(null);// setIsCallStarted(false);\nsocket.disconnect();// Disconnect from the socket\nnavigate(\"/room-management\");// Navigate to room-management page\n},[myStream,socket,navigate]);const handleIncommingCall=useCallback(async _ref2=>{let{from,offer}=_ref2;setRemoteSocketId(from);const stream=await navigator.mediaDevices.getUserMedia({audio:true,video:true});setMyStream(stream);console.log(`Incoming Call from ${from}`,offer);const ans=await peer.getAnswer(offer);socket.emit(\"call:accepted\",{to:from,ans});},[socket]);const sendStreams=useCallback(()=>{if(!myStream)return;const senders=peer.peer.getSenders();for(const track of myStream.getTracks()){const existingSender=senders.find(sender=>sender.track===track);if(!existingSender){peer.peer.addTrack(track,myStream);}}},[myStream]);const handleCallAccepted=useCallback(_ref3=>{let{from,ans}=_ref3;peer.setLocalDescription(ans);console.log(\"Call Accepted!\");sendStreams();},[sendStreams]);const handleNegoNeeded=useCallback(async()=>{const offer=await peer.getOffer();socket.emit(\"peer:nego:needed\",{offer,to:remoteSocketId});},[remoteSocketId,socket]);const handleSendMessage=()=>{if(newMessage.trim()){socket.emit(\"chat:message\",{message:newMessage});setMessages([...messages,{text:newMessage,sender:\"me\"}]);setNewMessage(\"\");}};const handleReceiveMessage=useCallback(_ref4=>{let{message}=_ref4;setMessages(prevMessages=>[...prevMessages,{text:message,sender:\"other\"}]);},[]);useEffect(()=>{peer.peer.addEventListener(\"negotiationneeded\",handleNegoNeeded);return()=>{peer.peer.removeEventListener(\"negotiationneeded\",handleNegoNeeded);};},[handleNegoNeeded]);const handleNegoNeedIncomming=useCallback(async _ref5=>{let{from,offer}=_ref5;const ans=await peer.getAnswer(offer);socket.emit(\"peer:nego:done\",{to:from,ans});},[socket]);const handleNegoNeedFinal=useCallback(async _ref6=>{let{ans}=_ref6;await peer.setLocalDescription(ans);},[]);useEffect(()=>{peer.peer.addEventListener(\"track\",async ev=>{const remoteStream=ev.streams;console.log(\"GOT TRACKS!!\");setRemoteStream(remoteStream[0]);});},[]);useEffect(()=>{socket.on(\"user:joined\",handleUserJoined);socket.on(\"incomming:call\",handleIncommingCall);socket.on(\"call:accepted\",handleCallAccepted);socket.on(\"peer:nego:needed\",handleNegoNeedIncomming);socket.on(\"peer:nego:final\",handleNegoNeedFinal);socket.on(\"chat:message\",handleReceiveMessage);return()=>{socket.off(\"user:joined\",handleUserJoined);socket.off(\"incomming:call\",handleIncommingCall);socket.off(\"call:accepted\",handleCallAccepted);socket.off(\"peer:nego:needed\",handleNegoNeedIncomming);socket.off(\"peer:nego:final\",handleNegoNeedFinal);socket.off(\"chat:message\",handleReceiveMessage);};},[socket,handleUserJoined,handleIncommingCall,handleCallAccepted,handleNegoNeedIncomming,handleNegoNeedFinal,handleReceiveMessage]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:roomId}),/*#__PURE__*/_jsx(\"h4\",{children:remoteSocketId?\"Connected\":\"No one in room\"}),myStream&&/*#__PURE__*/_jsx(\"button\",{onClick:sendStreams,children:\"Send Stream\"}),/*#__PURE__*/_jsx(\"button\",{onClick:isCalling?handleEndCall:handleCallUser,children:isCalling?\"End\":\"Call\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stream-container\",children:[myStream&&/*#__PURE__*/_jsxs(\"div\",{className:\"stream\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Stream\"}),/*#__PURE__*/_jsx(ReactPlayer,{playing:true,muted:true,height:\"100%\",width:\"100%\",url:myStream})]}),remoteStream&&/*#__PURE__*/_jsxs(\"div\",{className:\"stream\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Remote Stream\"}),/*#__PURE__*/_jsx(ReactPlayer,{playing:true,muted:true,height:\"100%\",width:\"100%\",url:remoteStream})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`message ${msg.sender===\"me\"?\"right\":\"left\"}`,children:msg.text},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type a message...\",className:\"input-field\",value:newMessage,onChange:e=>setNewMessage(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"send-btn\",onClick:handleSendMessage,children:\"Send\"})]})]})]});};export default RoomPage;","map":{"version":3,"names":["React","useEffect","useCallback","useState","useNavigate","useParams","ReactPlayer","peer","useSocket","jsx","_jsx","jsxs","_jsxs","RoomPage","roomId","socket","remoteSocketId","setRemoteSocketId","myStream","setMyStream","remoteStream","setRemoteStream","messages","setMessages","newMessage","setNewMessage","isCalling","setIsCalling","navigate","storedUser","localStorage","getItem","storeToken","handleUserJoined","_ref","email","id","console","log","handleCallUser","stream","navigator","mediaDevices","getUserMedia","audio","video","offer","getOffer","emit","to","handleEndCall","getTracks","forEach","track","stop","disconnect","handleIncommingCall","_ref2","from","ans","getAnswer","sendStreams","senders","getSenders","existingSender","find","sender","addTrack","handleCallAccepted","_ref3","setLocalDescription","handleNegoNeeded","handleSendMessage","trim","message","text","handleReceiveMessage","_ref4","prevMessages","addEventListener","removeEventListener","handleNegoNeedIncomming","_ref5","handleNegoNeedFinal","_ref6","ev","streams","on","off","className","children","onClick","playing","muted","height","width","url","map","msg","index","type","placeholder","value","onChange","e","target"],"sources":["/Users/md.golamrabbani/Desktop/web-rtc/React-webRTC/client/src/screens/Room.jsx"],"sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ReactPlayer from \"react-player\";\nimport peer from \"../service/peer\";\nimport { useSocket } from \"../context/SocketProvider\";\nimport '../Room.css';\n\nconst RoomPage = () => {\n  const { roomId } = useParams();\n  const socket = useSocket();\n  const [remoteSocketId, setRemoteSocketId] = useState(null);\n  const [myStream, setMyStream] = useState();\n  const [remoteStream, setRemoteStream] = useState();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [isCalling, setIsCalling] = useState(false); // State to track if the call is ongoing\n  const navigate = useNavigate();\n  \n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    const storeToken = localStorage.getItem('token')  \n    if(!storeToken && !storedUser){\n      navigate('/login');\n    }\n  }, []);\n\n  const handleUserJoined = useCallback(({ email, id }) => {\n    console.log(`Email ${email} joined room`);\n    setRemoteSocketId(id);\n  }, []);\n\n  const handleCallUser = useCallback(async () => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: true,\n    });\n    const offer = await peer.getOffer();\n    socket.emit(\"user:call\", { to: remoteSocketId, offer });\n    setMyStream(stream);\n    setIsCalling(true); // Set the call as ongoing\n  }, [remoteSocketId, socket]);\n\n  // const handleEndCall = useCallback(() => {\n  //   socket.emit(\"call:end\", { to: remoteSocketId });\n  //   setIsCalling(false); // Set the call as ended\n  //   setMyStream(null); // Stop the stream\n  //   setRemoteStream(null); // Stop the remote stream\n\n  //   // Disconnect socket after the call ends\n  //   socket.disconnect();\n  //   console.log(\"Socket disconnected\");\n  // }, [remoteSocketId, socket]);\n\n  const handleEndCall = useCallback(() => {\n    // Stop all tracks of the local stream\n    if (myStream) {\n      myStream.getTracks().forEach(track => track.stop());\n    }\n    // Reset streams and call state\n    setMyStream(null);\n    setRemoteStream(null);\n    // setIsCallStarted(false);\n    socket.disconnect(); // Disconnect from the socket\n    navigate(\"/room-management\"); // Navigate to room-management page\n  }, [myStream, socket, navigate]);\n\n\n  const handleIncommingCall = useCallback(\n    async ({ from, offer }) => {\n      setRemoteSocketId(from);\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n      setMyStream(stream);\n      console.log(`Incoming Call from ${from}`, offer);\n      const ans = await peer.getAnswer(offer);\n      socket.emit(\"call:accepted\", { to: from, ans });\n    },\n    [socket]\n  );\n\n  const sendStreams = useCallback(() => {\n    if (!myStream) return;\n  \n    const senders = peer.peer.getSenders();\n    for (const track of myStream.getTracks()) {\n      const existingSender = senders.find(sender => sender.track === track);\n      \n      if (!existingSender) {\n        peer.peer.addTrack(track, myStream);\n      }\n    }\n  }, [myStream]);\n\n  const handleCallAccepted = useCallback(\n    ({ from, ans }) => {\n      peer.setLocalDescription(ans);\n      console.log(\"Call Accepted!\");\n      sendStreams();\n    },\n    [sendStreams]\n  );\n\n  const handleNegoNeeded = useCallback(async () => {\n    const offer = await peer.getOffer();\n    socket.emit(\"peer:nego:needed\", { offer, to: remoteSocketId });\n  }, [remoteSocketId, socket]);\n\n  const handleSendMessage = () => {\n    if (newMessage.trim()) {\n      socket.emit(\"chat:message\", { message: newMessage });\n      setMessages([...messages, { text: newMessage, sender: \"me\" }]);\n      setNewMessage(\"\");\n    }\n  };\n\n  const handleReceiveMessage = useCallback(({ message }) => {\n    setMessages((prevMessages) => [...prevMessages, { text: message, sender: \"other\" }]);\n  }, []);\n\n  useEffect(() => {\n    peer.peer.addEventListener(\"negotiationneeded\", handleNegoNeeded);\n    return () => {\n      peer.peer.removeEventListener(\"negotiationneeded\", handleNegoNeeded);\n    };\n  }, [handleNegoNeeded]);\n\n  const handleNegoNeedIncomming = useCallback(\n    async ({ from, offer }) => {\n      const ans = await peer.getAnswer(offer);\n      socket.emit(\"peer:nego:done\", { to: from, ans });\n    },\n    [socket]\n  );\n\n  const handleNegoNeedFinal = useCallback(async ({ ans }) => {\n    await peer.setLocalDescription(ans);\n  }, []);\n\n  useEffect(() => {\n    peer.peer.addEventListener(\"track\", async (ev) => {\n      const remoteStream = ev.streams;\n      console.log(\"GOT TRACKS!!\");\n      setRemoteStream(remoteStream[0]);\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.on(\"user:joined\", handleUserJoined);\n    socket.on(\"incomming:call\", handleIncommingCall);\n    socket.on(\"call:accepted\", handleCallAccepted);\n    socket.on(\"peer:nego:needed\", handleNegoNeedIncomming);\n    socket.on(\"peer:nego:final\", handleNegoNeedFinal);\n    socket.on(\"chat:message\", handleReceiveMessage);\n\n    return () => {\n      socket.off(\"user:joined\", handleUserJoined);\n      socket.off(\"incomming:call\", handleIncommingCall);\n      socket.off(\"call:accepted\", handleCallAccepted);\n      socket.off(\"peer:nego:needed\", handleNegoNeedIncomming);\n      socket.off(\"peer:nego:final\", handleNegoNeedFinal);\n      socket.off(\"chat:message\", handleReceiveMessage);\n    };\n  }, [\n    socket,\n    handleUserJoined,\n    handleIncommingCall,\n    handleCallAccepted,\n    handleNegoNeedIncomming,\n    handleNegoNeedFinal,\n    handleReceiveMessage,\n  ]);\n\n  return (\n    <div className=\"row\">\n      <div className=\"video-container\">\n        <h1>{roomId}</h1>\n        <h4>{remoteSocketId ? \"Connected\" : \"No one in room\"}</h4>\n        {myStream && <button onClick={sendStreams}>Send Stream</button>}\n        <button onClick={isCalling ? handleEndCall : handleCallUser}>\n          {isCalling ? \"End\" : \"Call\"}\n        </button>\n\n        <div className=\"stream-container\">\n          {myStream && (\n            <div className=\"stream\">\n              <h1>My Stream</h1>\n              <ReactPlayer playing muted height=\"100%\" width=\"100%\" url={myStream} />\n            </div>\n          )}\n\n          {remoteStream && (\n            <div className=\"stream\">\n              <h1>Remote Stream</h1>\n              <ReactPlayer playing muted height=\"100%\" width=\"100%\" url={remoteStream} />\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"chat-container\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${msg.sender === \"me\" ? \"right\" : \"left\"}`}>\n            {msg.text}\n          </div>\n        ))}\n        <div className=\"chat-input\">\n          <input\n            type=\"text\"\n            placeholder=\"Type a message...\"\n            className=\"input-field\"\n            value={newMessage}\n            onChange={(e) => setNewMessage(e.target.value)}\n          />\n          <button className=\"send-btn\" onClick={handleSendMessage}>Send</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoomPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}